name: Testing Suite

on: push

env:
  MIOVISION_PASSWORD: ${{secrets.MIOVISION_PASSWORD}}
  MIOVISION_USERNAME: ${{secrets.MIOVISION_USERNAME}}

jobs:
  testing_job:
    name: Main Testing job
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v5
      
      - name: Install Python
        uses: actions/setup-python@v6.1.0
        with: 
          python-version: '3.12.10'
          cache: 'pip'
      
      - name: Install requirements.txt
        run: pip install -r construction_requirements.txt
      
      - name: Configure Playwright
        run: playwright install
      
      - name: Test Miovision Directional Volume Scraper
        run: pytest ./database_construction/tests/test_volume_provider